(this["webpackJsonpdialogflow-demo"]=this["webpackJsonpdialogflow-demo"]||[]).push([[0],{339:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n.n(a),o=n(81),s=n.n(o),i=(n(88),n(12)),r=n.n(i),l=n(47),u=n(48),d=n(13),h=n(17),b=(n.p,n.p,n.p,n.p+"static/media/logo-panel.a3fcb134.png"),p=(n(90),n(82)),g=n(83),j=n.n(g),f=n(344),m={particles:{number:{value:175,density:{enable:!0,value_area:1735.01577287066}},color:{value:"#3d5053"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:2,random:!0,anim:{enable:!1,speed:40.00000000000001,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#2d3032",opacity:1,width:.9994419782288222},move:{enable:!0,speed:.2,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40.00000000000001,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0},O=n(343),v=(n(333),n(345)),y=n(4),x={userText:"bubble-user-text",userChatBubble:"bubble-user-bubble",recipientText:"bubble-recipient-text",recipientChatBubble:"bubble-recipient-bubble"},w=Object(f.a)();var S=function(){var e=Object(a.useState)(w),t=Object(h.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!0),s=Object(h.a)(o,2),i=s[0],g=s[1],S=Object(a.useState)(!1),T=Object(h.a)(S,2),I=T[0],_=T[1],k=Object(a.useState)(!1),C=Object(h.a)(k,2),D=C[0],N=C[1];console.log(n);var M=Object(a.useState)([]),F=Object(h.a)(M,2),E=F[0],R=F[1],z=Object(a.useState)([{id:1,name:"You",isTyping:!1,lastSeenMessageId:1,bgImageUrl:void 0},{id:2,name:"Direktiv",isTyping:!1,lastSeenMessageId:2,bgImageUrl:void 0,isTypingMessage:!1}]),L=Object(h.a)(z,2),q=L[0],B=L[1],W=Object(a.useState)(""),A=Object(h.a)(W,2),P=A[0],J=A[1],U=Object(a.useState)(1),G=Object(h.a)(U,2),K=G[0],Y=G[1],X=Object(a.useCallback)((function(e){B((function(e){return e[1].isTypingMessage=!0,Object(d.a)(e)}));var t=E.length+1;console.log("newMsgID =",t);var a={id:t,authorId:2,message:I?"Fetching Details...":"Writing Response...",createdOn:new Date,isSend:!0};R([].concat(Object(d.a)(E),[a])),fetch("http://127.0.0.1:8373/".concat(n,"/dialogFlow/"),{method:"post",body:JSON.stringify({Message:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then(function(){var a=Object(u.a)(r.a.mark((function a(c){var o,s,i,u,h,b;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!I){a.next=7;break}return console.log("inside isEndLoop"),a.next=4,new Promise((function(e){return setTimeout(e,1e4)}));case 4:fetch("http://127.0.0.1:8373/".concat(n,"/dialogFlow/"),{method:"post",body:JSON.stringify({Message:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var n,a=Object(l.a)(c.query_result.output_contexts);try{for(a.s();!(n=a.n()).done;){n.value.name.endsWith("output")&&N(!0)}}catch(r){a.e(r)}finally{a.f()}for(var o=e.query_result.fulfillment_text.split("\n"),s=[],i=0;i<o.length;i++)s.push({id:t+i,authorId:2,message:o[i],createdOn:new Date,isSend:!0});console.log("NEW ERRORR"),R([].concat(Object(d.a)(E),s))})).catch((function(e){console.log("error =",e);var n={id:t,authorId:2,message:"Sorry an error seemed to occur: ".concat(e),createdOn:new Date,isSend:!0};R([].concat(Object(d.a)(E),[n]))})).finally((function(){B((function(e){return e[1].isTypingMessage=!1,Object(d.a)(e)})),Y(1)})),a.next=16;break;case 7:o=Object(l.a)(c.query_result.output_contexts);try{for(o.s();!(s=o.n()).done;)((i=s.value).name.endsWith("gcp_end")||i.name.endsWith("aws_end"))&&_(!0)}catch(r){o.e(r)}finally{o.f()}for(console.log("resp =",c),u=[],h=c.query_result.fulfillment_text.split("\n"),console.log("respLines =",h),b=0;b<h.length;b++)u.push({id:t+b,authorId:2,message:h[b],createdOn:new Date,isSend:!0});console.log("ERRORR"),R([].concat(Object(d.a)(E),u));case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log("error =",e);var n={id:t,authorId:2,message:"Sorry an error seemed to occur: ".concat(e),createdOn:new Date,isSend:!0};R([].concat(Object(d.a)(E),[n]))})).finally((function(){B((function(e){return e[1].isTypingMessage=!1,Object(d.a)(e)})),Y(1)}))}),[q,E,n,I]),H=Object(a.useCallback)((function(){fetch("http://127.0.0.1:8373/".concat(n,"/dialogFlow/init"),{method:"get",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("resp =",e);var t={id:1,authorId:2,message:e.query_result.fulfillment_text,createdOn:new Date,isSend:!0};R([t])})).catch((function(e){var t={id:1,authorId:2,message:"Sorry an error seemed to occur: ".concat(e),createdOn:new Date,isSend:!0};R([t])})).finally((function(){B((function(e){return e[1].isTypingMessage=!1,Object(d.a)(e)})),Y(1)}))}),[q,E,n]),Q=Object(a.useCallback)((function(e){function t(){return(t=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{id:E.length+1,authorId:K,message:P,createdOn:new Date,isSend:!0});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Y(2),function(){return t.apply(this,arguments)}()}),[P,K,E]);return Object(a.useEffect)((function(){E&&(E&&0==E.length?H():(E.length>0&&g(!1),E.length>100?console.log("BOTTTTLE NECK"):1==E[E.length-1].authorId&&X(E[E.length-1].message)))}),[E,X]),Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)("div",{className:"top",children:[Object(y.jsx)(j.a,{style:{position:"absolute",top:0,left:0,width:"1vw",height:"1vh",zIndex:0},params:m}),Object(y.jsxs)("div",{className:"layout",children:[Object(y.jsxs)("div",{className:"panel info",children:[Object(y.jsx)("div",{className:"info-logo",children:Object(y.jsx)("img",{src:b,style:{width:"45%",padding:"50px"},alt:"Logo"})}),Object(y.jsxs)("div",{className:"info-details",children:[Object(y.jsx)("p",{children:"The Direktiv Dialogflow chatbot is an online chatbot that leverages Google's 'Dialogflow' natural language processing chatbot to provide users with a simple approach to deploying online infrastructure."}),Object(y.jsx)("p",{children:"To the right is a demo that you can use to chat with the Direktiv chatbot! It will prompt users for all of the information it requires to deploy a virtual machine instance to either Google Cloud Platform or Amazon Web Services."})]}),Object(y.jsx)("div",{style:{position:"relative",bottom:"0px",left:"0px",zIndex:110,textAlign:"start",marginLeft:"5px",fontSize:"small",color:"rgb(66, 67, 68)"},children:n})]}),Object(y.jsx)("div",{className:"panel chat",children:Object(y.jsx)("div",{className:"chat-inner",children:i?Object(y.jsxs)("div",{className:"chat-loading",children:[Object(y.jsx)("div",{children:"Starting Dialogflow Session"}),Object(y.jsx)(v.a,{color:"#10a9eb"})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"chat-feed",children:Object(y.jsx)("div",{id:"chat1",className:"chat-feed-inner",children:Object(y.jsx)(p.ChatFeed,{id:"chat2",messages:E,authors:q,yourAuthorId:1,chatBubbleClasses:x,showIsTyping:!0})})}),D?Object(y.jsxs)("div",{className:"chat-input",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(y.jsx)("div",{style:{color:"white",height:"30px"},children:"- Instance created, chat has ended -"}),Object(y.jsx)(O.a,{variant:"light",onClick:function(){g(!0),c(Object(f.a)()),R([]),_(!1),N(!1),setTimeout((function(){H()}),5e3)},children:"Start A New Chat?"})]}):Object(y.jsx)("form",{className:"chat-input",onSubmit:function(e){Q(e).then((function(e){R([].concat(Object(d.a)(E),[e])),J("")})).catch((function(e){console.log("error =",e)})),e.preventDefault()},children:Object(y.jsx)("textarea",{onKeyUp:function(e){if("Pause"===e.key)return g(!0),c(Object(f.a)()),R([]),_(!1),N(!1),void setTimeout((function(){H()}),5e3);"Enter"===e.key&&Q(e).then((function(e){R([].concat(Object(d.a)(E),[e])),J("")})).catch((function(e){console.log("error =",e)}))},placeholder:"Type a message...",disabled:2==K,className:"chat-message-input ".concat(1==K?"":"chat-message-input-disabled"),value:P,onChange:function(e){J(e.target.value)}})})]})})})]})]})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,346)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};s.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(S,{})}),document.getElementById("root")),T()},88:function(e,t,n){},90:function(e,t,n){}},[[339,1,2]]]);
//# sourceMappingURL=main.f9c6c4c8.chunk.js.map